from openai import OpenAI
from enum import Enum
from pydantic import BaseModel
import os
from dotenv import load_dotenv
import pandas as pd

class tissues1(str, Enum):
    t0 = "cerebellum male adult (27 years) and male adult (35 years)"
    t1 = "frontal cortex male adult (27 years) and male adult (35 years)"
    t2 = "chorion"
    t3 = "Ishikawa treated with 0.02% dimethyl sulfoxide for 1 hour"
    t4 = "GM03348"
    t5 = "GM03348 genetically modified using transduction treated with 3 ug/mL doxycycline for 10 days"
    t6 = "AG08395"
    t7 = "AG08396"
    t8 = "AG20443"
    t9 = "frontal cortex female adult (67 years) and female adult (80 years)"
    t10 = "H54"
    t11 = "GM10248"
    t12 = "GM12878"
    t13 = "GM12891"
    t14 = "GM12892"
    t15 = "GM18507"
    t16 = "GM19238"
    t17 = "GM19239"
    t18 = "GM19240"
    t19 = "H1-hESC"
    t20 = "H7-hESC"
    t21 = "H9"
    t22 = "heart male adult (27 years) and male adult (35 years)"
    t23 = "HEK293T"
    t24 = "HeLa-S3 treated with interferon alpha for 4 hours"
    t25 = "HeLa-S3"
    t26 = "hepatocyte"
    t27 = "HepG2"
    t28 = "HTR-8/SVneo"
    t29 = "endothelial cell of umbilical vein newborn"
    t30 = "CWRU1 male"
    t31 = "iPS-NIHi11 male adult (71 year) originated from AG20443"
    t32 = "iPS-NIHi7 female adult (85 years) originated from AG08395"
    t33 = "K562 treated with 1 uM vorinostat for 72 hours"
    t34 = "K562 G2 phase"
    t35 = "K562 G1 phase"
    t36 = "LNCaP clone FGC"
    t37 = "LNCaP clone FGC treated with 1 nM 17B-hydroxy-17-methylestra-4,9,11-trien-3-one for 12 hours"
    t38 = "MCF-7 originated from MCF-7"
    t39 = "medulloblastoma"
    t40 = "epidermal melanocyte"
    t41 = "CD14-positive monocyte female"
    t42 = "keratinocyte female"
    t43 = "osteoblast"
    t44 = "psoas muscle male adult (27 years) and male adult (35 years)"
    t45 = "T47D treated with 10 nM 17B-estradiol for 30 minutes"
    t46 = "urothelium cell line"
    t47 = "A549"
    t48 = "AG04449"
    t49 = "AG04450"
    t50 = "AG09309"
    t51 = "AG09319"
    t52 = "AG10803"
    t53 = "fibroblast of the aortic adventitia female"
    t54 = "BE2C"
    t55 = "BJ"
    t56 = "HS-27A"
    t57 = "HS-5"
    t58 = "stromal cell of bone marrow male"
    t59 = "Caco-2"
    t60 = "B cell female adult (43 years)"
    t61 = "hematopoietic multipotent progenitor cell"
    t62 = "naive thymus-derived CD4-positive, alpha-beta T cell male adult (26 years)"
    t63 = "CMK"
    t64 = "GM04503"
    t65 = "GM04504"
    t66 = "GM06990"
    t67 = "GM12864"
    t68 = "GM12865"
    t69 = "GM12878"
    t70 = "H1-hESC"
    t71 = "cardiac mesoderm"
    t72 = "cardiac mesoderm"
    t73 = "cardiac mesoderm"
    t74 = "cardiac mesoderm"
    t75 = "H7-hESC"
    t76 = "astrocyte of the hippocampus"
    t77 = "astrocyte of the spinal cord"
    t78 = "astrocyte of the cerebellum"
    t79 = "amniotic epithelial cell"
    t80 = "brain microvascular endothelial cell"
    t81 = "brain pericyte"
    t82 = "smooth muscle cell of the brain vasculature female"
    t83 = "cardiac fibroblast"
    t84 = "cardiac fibroblast female"
    t85 = "cardiac muscle cell"
    t86 = "fibroblast of the conjunctiva"
    t87 = "choroid plexus epithelial cell"
    t88 = "HCT116"
    t89 = "epithelial cell of esophagus"
    t90 = "HeLa-S3 G1b phase"
    t91 = "HepG2"
    t92 = "foreskin fibroblast male newborn"
    t93 = "HFF-Myc originated from foreskin fibroblast"
    t94 = "fibroblast of gingiva"
    t95 = "iris pigment epithelial cell"
    t96 = "HL-60"
    t97 = "mammary epithelial cell female"
    t98 = "fibroblast of mammary gland female"
    t99 = "dermis blood vessel endothelial cell female adult"
    t100 = "dermis blood vessel endothelial cell female adult"
    t101 = "dermis blood vessel endothelial cell male newborn"
    t102 = "dermis microvascular lymphatic vessel endothelial cell female"
    t103 = "dermis microvascular lymphatic vessel endothelial cell male"
    t104 = "dermis blood vessel endothelial cell male newborn"
    t105 = "lung microvascular endothelial cell female"
    t106 = "lung microvascular endothelial cell female"
    t107 = "non-pigmented ciliary epithelial cell"
    t108 = "pulmonary artery endothelial cell female"
    t109 = "fibroblast of pulmonary artery"
    t110 = "fibroblast of peridontal ligament male"
    t111 = "fibroblast of lung"
    t112 = "renal cortical epithelial cell"
    t113 = "kidney epithelial cell"
    t114 = "glomerular endothelial cell"
    t115 = "retinal pigment epithelial cell"
    t116 = "skeletal muscle myoblast"
    t117 = "myotube originated from skeletal muscle myoblast"
    t118 = "endothelial cell of umbilical vein newborn"
    t119 = "fibroblast of villous mesenchyme"
    t120 = "Jurkat clone E61"
    t121 = "K562"
    t122 = "K562"
    t123 = "K562"
    t124 = "myocyte originated from LHCN-M2"
    t125 = "LHCN-M2"
    t126 = "LNCaP clone FGC"
    t127 = "M059J"
    t128 = "MCF-7"
    t129 = "MCF-7 treated with 100 nM estradiol for 1 hour"
    t130 = "MCF-7"
    t131 = "CD14-positive monocyte female"
    t132 = "NB4"
    t133 = "astrocyte"
    t134 = "bronchial epithelial cell female treated with retinoic acid"
    t135 = "fibroblast of dermis female adult"
    t136 = "foreskin fibroblast male newborn"
    t137 = "keratinocyte female"
    t138 = "fibroblast of lung male adult (45 years)"
    t139 = "NT2/D1"
    t140 = "Panc1"
    t141 = "epithelial cell of prostate"
    t142 = "RPMI-7951"
    t143 = "epithelial cell of proximal tubule"
    t144 = "bronchial epithelial cell"
    t145 = "SK-N-MC"
    t146 = "SK-N-SH treated with 6 uM all-trans-retinoic acid for 48 hours"
    t147 = "skeletal muscle cell"
    t148 = "T47D"
    t149 = "T-helper 1 cell"
    t150 = "T-helper 1 cell female adult (26 years)"
    t151 = "T-helper 1 cell male adult (33 years)"
    t152 = "T-helper 17 cell"
    t153 = "T-helper 2 cell"
    t154 = "T-helper 2 cell female adult (26 years)"
    t155 = "T-helper 2 cell male adult (33 years)"
    t156 = "regulatory T cell female adult (35 years)"
    t157 = "regulatory T cell male adult (28 years)"
    t158 = "WERI-Rb-1"
    t159 = "WI38 genetically modified using stable transfection originated from WI38 treated with 20 nM afimoxifene for 72 hours"
    t160 = "WI38 genetically modified using stable transfection originated from WI38"
    t161 = "HT1080"
    t162 = "SK-MEL-5"
    t163 = "SJCRH30"
    t164 = "NCI-H460"
    t165 = "SK-N-DZ treated with dimethyl sulfoxide for 72 hours"
    t166 = "GM23338 male adult (53 years) originated from GM23248"
    t167 = "lung embryo (112 days)"
    t168 = "SK-MEL-5"
    t169 = "muscle of back female embryo (113 days)"
    t170 = "iPS DF 4.7 male newborn"
    t171 = "right renal cortex interstitium male embryo (105 days)"
    t172 = "caudate nucleus male adult (78 years)"
    t173 = "left renal pelvis male embryo (105 days)"
    t174 = "H9 S1 phase genetically modified using stable transfection"
    t175 = "right kidney female embryo (87 days)"
    t176 = "Karpas-422"
    t177 = "CD8-positive, alpha-beta T cell male adult (21 year)"
    t178 = "renal cortex interstitium female embryo (96 days)"
    t179 = "brain female embryo (85 days)"
    t180 = "muscle of leg male embryo (97 days)"
    t181 = "muscle of back female embryo (105 days)"
    t182 = "placenta female embryo (113 days)"
    t183 = "foreskin keratinocyte male newborn"
    t184 = "right kidney female embryo (107 days)"
    t185 = "RCC 7860"
    t186 = "colon epithelial cell line"
    t187 = "left renal cortex interstitium male embryo (120 days)"
    t188 = "T-cell"
    t189 = "large intestine male embryo (113 days)"
    t190 = "PC-3"
    t191 = "muscle of leg male embryo (96 days)"
    t192 = "adrenal gland embryo (96 days)"
    t193 = "coronary artery female adult (53 years)"
    t194 = "stomach female embryo (105 days)"
    t195 = "muscle of arm female embryo (115 days)"
    t196 = "heart female embryo (91 day)"
    t197 = "kidney embryo (80 days)"
    t198 = "heart left ventricle female adult (53 years)"
    t199 = "muscle of back female embryo (98 days)"
    t200 = "lung male embryo (108 days)"
    t201 = "tibial artery female adult (53 years)"
    t202 = "adrenal gland male embryo (101 day)"
    t203 = "kidney female embryo (121 day)"
    t204 = "stomach female embryo (107 days)"
    t205 = "small intestine female embryo (110 days)"
    t206 = "MG63"
    t207 = "skin of body female embryo (82 days)"
    t208 = "left renal cortex interstitium male embryo (105 days)"
    t209 = "stomach male embryo (58 days) and male embryo (76 days)"
    t210 = "left kidney female embryo (59 days) and male embryo (91 day)"
    t211 = "hematopoietic multipotent progenitor cell"
    t212 = "kidney female embryo (120 days)"
    t213 = "muscle of back female embryo (115 days)"
    t214 = "hematopoietic multipotent progenitor cell male adult (25 years) treated with erythropoietin for 20 days, hydrocortisone succinate for 20 days, kit ligand for 20 days, interleukin-3 for 20 days"
    t215 = "small intestine female embryo (120 days)"
    t216 = "brain embryo (112 days)"
    t217 = "stomach female embryo (105 days)"
    t218 = "left kidney female embryo (98 days)"
    t219 = "trophoblast cell embryo (21 week)"
    t220 = "common myeloid progenitor, CD34-positive female adult (27 years)"
    t221 = "eye female embryo (76 days)"
    t222 = "renal cortex interstitium male embryo (108 days)"
    t223 = "placenta female embryo (108 days)"
    t224 = "stomach female adult (53 years)"
    t225 = "small intestine female embryo (107 days)"
    t226 = "large intestine female embryo (120 days)"
    t227 = "kidney glomerular epithelial cell male adult (43 years) and male adult (62 years)"
    t228 = "renal pelvis female embryo (96 days)"
    t229 = "lung female embryo (76 days)"
    t230 = "muscle of back male embryo (104 days)"
    t231 = "lung female embryo (85 days)"
    t232 = "spinal cord male embryo (105 days)"
    t233 = "hematopoietic multipotent progenitor cell treated with interleukin-3 for 4 days, kit ligand for 4 days, hydrocortisone succinate for 4 days, erythropoietin for 4 days"
    t234 = "HepG2"
    t235 = "foreskin fibroblast male newborn"
    t236 = "omental fat pad female adult (53 years)"
    t237 = "large intestine female embryo (110 days)"
    t238 = "heart female embryo (105 days)"
    t239 = "renal cortex interstitium male embryo (113 days)"
    t240 = "brain female embryo (96 days)"
    t241 = "thyroid gland male adult (37 years)"
    t242 = "liver embryo (59 days) and embryo (80 days)"
    t243 = "stomach male adult (54 years)"
    t244 = "thymus male embryo (127 days)"
    t245 = "upper lobe of left lung male adult (37 years)"
    t246 = "endodermal cell"
    t247 = "forelimb muscle female embryo (108 days)"
    t248 = "CD4-positive, alpha-beta T cell male adult (37 years)"
    t249 = "muscle of leg male embryo (101 day)"
    t250 = "gastrocnemius medialis male adult (37 years)"
    t251 = "gastrocnemius medialis male adult (54 years)"
    t252 = "stomach male embryo (91 day)"
    t253 = "muscle of back male embryo (101 day)"
    t254 = "heart female embryo (117 days)"
    t255 = "kidney tubule cell female adult (80 years) and male adult (62 years)"
    t256 = "fibroblast of skin of abdomen male embryo (97 days)"
    t257 = "pancreas male adult (34 years)"
    t258 = "trophoblast cell originated from H1-hESC"
    t259 = "left kidney male embryo (96 days)"
    t260 = "skin fibroblast male embryo (97 days)"
    t261 = "brain female embryo (142 days)"
    t262 = "small intestine male embryo (105 days)"
    t263 = "heart female embryo (110 days)"
    t264 = "common myeloid progenitor, CD34-positive female"
    t265 = "adrenal gland male adult (37 years)"
    t266 = "muscle of back female embryo (85 days)"
    t267 = "muscle of leg female embryo (85 days)"
    t268 = "Peyer's patch male adult (54 years)"
    t269 = "amniotic stem cell"
    t270 = "stomach female embryo (98 days)"
    t271 = "large intestine female embryo (91 day)"
    t272 = "lung female embryo (120 days)"
    t273 = "skin fibroblast male embryo (97 days)"
    t274 = "SW480"
    t275 = "GM23248"
    t276 = "muscle of trunk female embryo (120 days)"
    t277 = "islet precursor cell"
    t278 = "medulla oblongata male adult (78 years) and male adult (84 years)"
    t279 = "right lung male embryo (115 days)"
    t280 = "body of pancreas male adult (54 years)"
    t281 = "mammary epithelial cell female adult (18 years)"
    t282 = "gastrocnemius medialis female adult (51 year)"
    t283 = "uterus female adult (53 years)"
    t284 = "ELR"
    t285 = "omental fat pad female adult (51 year)"
    t286 = "stomach male child (3 years)"
    t287 = "B cell male adult (37 years)"
    t288 = "foreskin fibroblast male newborn"
    t289 = "renal cortex interstitium male embryo (91 day)"
    t290 = "ACHN"
    t291 = "kidney tubule cell female adult (80 years) treated with 5 uM cisplatin"
    t292 = "left renal pelvis male embryo (105 days)"
    t293 = "iPS DF 6.9 male newborn"
    t294 = "kidney male embryo (87 days)"
    t295 = "right lung female embryo (91 day)"
    t296 = "NCI-H226"
    t297 = "right renal cortex interstitium male embryo (105 days)"
    t298 = "G401"
    t299 = "muscle of arm male embryo (113 days)"
    t300 = "common myeloid progenitor, CD34-positive male adult"
    t301 = "muscle of leg female embryo (113 days)"
    t302 = "arm bone male embryo (81 day)"
    t303 = "H9"
    t304 = "testis male embryo"
    t305 = "neural stem progenitor cell originated from H1-hESC"
    t306 = "right atrium auricular region female adult (51 year)"
    t307 = "common myeloid progenitor, CD34-positive male adult (49 years)"
    t308 = "stomach female embryo (121 day)"
    t309 = "muscle of leg female embryo (105 days)"
    t310 = "muscle of leg male embryo (97 days)"
    t311 = "left kidney female embryo (87 days)"
    t312 = "muscle of back male embryo (97 days)"
    t313 = "muscle of leg male embryo (96 days)"
    t314 = "right lung female embryo (105 days)"
    t315 = "NAMALWA treated with Sendai virus for 2 hours"
    t316 = "renal pelvis male embryo (127 days)"
    t317 = "muscle of arm male embryo (96 days)"
    t318 = "heart male child (3 years)"
    t319 = "brain female embryo (117 days)"
    t320 = "muscle of arm female embryo (85 days)"
    t321 = "heart male embryo (110 days)"
    t322 = "L1-S8"
    t323 = "CD8-positive, alpha-beta T cell male adult (37 years)"
    t324 = "muscle of back male embryo (91 day)"
    t325 = "left renal pelvis male embryo (105 days)"
    t326 = "middle frontal gyrus male adult (78 years)"
    t327 = "lung male embryo (103 days)"
    t328 = "heart male embryo (105 days)"
    t329 = "left renal pelvis male embryo (120 days)"
    t330 = "common myeloid progenitor, CD34-positive female adult (50 years)"
    t331 = "Peyer's patch female adult (53 years)"
    t332 = "skin fibroblast male embryo (97 days)"
    t333 = "hematopoietic multipotent progenitor cell"
    t334 = "right kidney male embryo (87 days)"
    t335 = "tibial artery male adult (37 years)"
    t336 = "renal cell carcinoma"
    t337 = "thymus female embryo (113 days)"
    t338 = "brain female embryo (109 days)"
    t339 = "Daoy"
    t340 = "A673"

class tissues2(str, Enum):
    t341 = "muscle of arm male embryo (101 day)"
    t342 = "muscle of arm female embryo (120 days)"
    t343 = "muscle of back male embryo (105 days)"
    t344 = "skin fibroblast male embryo (97 days)"
    t345 = "ecto neural progenitor cell originated from H9"
    t346 = "hematopoietic multipotent progenitor cell treated with interleukin-3 for 17 days, kit ligand for 17 days, hydrocortisone succinate for 17 days, erythropoietin for 17 days"
    t347 = "hepatocyte originated from H9"
    t348 = "renal pelvis male embryo (97 days)"
    t349 = "heart embryo (101 day)"
    t350 = "large intestine male embryo (115 days)"
    t351 = "T-cell male adult (37 years)"
    t352 = "skin fibroblast male embryo (97 days)"
    t353 = "CD1c-positive myeloid dendritic cell"
    t354 = "B cell male adult (21 year)"
    t355 = "superior temporal gyrus male adult (84 years)"
    t356 = "skin fibroblast male embryo (97 days)"
    t357 = "iPS DF 19.11 male newborn"
    t358 = "hindlimb muscle male embryo (120 days)"
    t359 = "MCF 10A treated with 1 uM tamoxifen for 6 hours"
    t360 = "sigmoid colon male adult (54 years)"
    t361 = "heart male embryo (120 days)"
    t362 = "tibial nerve female adult (51 year)"
    t363 = "adipocyte"
    t364 = "muscle of trunk female embryo (121 day)"
    t365 = "left cardiac atrium female embryo (101 day)"
    t366 = "T-cell male adult (21 year)"
    t367 = "right kidney male embryo (108 days)"
    t368 = "adrenal gland female embryo (108 days)"
    t369 = "hematopoietic multipotent progenitor cell treated with interleukin-3 for 11 day, kit ligand for 11 day, hydrocortisone succinate for 11 day, erythropoietin for 11 day"
    t370 = "brain male embryo (105 days)"
    t371 = "body of pancreas female adult (53 years)"
    t372 = "left kidney female embryo (147 days)"
    t373 = "CD4-positive, alpha-beta T cell male adult (37 years)"
    t374 = "KBM-7"
    t375 = "psoas muscle male child (3 years)"
    t376 = "ovary female embryo"
    t377 = "RKO"
    t378 = "leg bone male embryo (81 day)"
    t379 = "glomerular visceral epithelial cell child (3 years)"
    t380 = "foreskin melanocyte male newborn"
    t381 = "embryonic facial prominence embryo (53 days) and embryo (58 days)"
    t382 = "vagina female adult (53 years)"
    t383 = "kidney female embryo (85 days)"
    t384 = "muscle of back male embryo (96 days)"
    t385 = "muscle of trunk female embryo (113 days)"
    t386 = "iPS DF 19.7 male newborn"
    t387 = "right lung female embryo (110 days)"
    t388 = "left lung male embryo (87 days)"
    t389 = "large intestine female embryo (105 days)"
    t390 = "right lung female embryo (98 days)"
    t391 = "leg bone male embryo (81 day)"
    t392 = "CD14-positive monocyte male adult (21 year)"
    t393 = "muscle of arm male embryo (120 days)"
    t394 = "Peyer's patch male adult (37 years)"
    t395 = "common myeloid progenitor, CD34-positive male adult (36 years)"
    t396 = "left lung female embryo (108 days)"
    t397 = "small intestine female embryo (91 day)"
    t398 = "MM.1S"
    t399 = "sigmoid colon female adult (51 year)"
    t400 = "left lung female embryo (105 days)"
    t401 = "common myeloid progenitor, CD34-positive female adult (33 years)"
    t402 = "retina embryo (125 days) and male embryo (103 days)"
    t403 = "brain male embryo (72 days) and male embryo (76 days)"
    t404 = "muscle of back male embryo (108 days)"
    t405 = "IMR-90"
    t406 = "lung female embryo (108 days)"
    t407 = "left lung male embryo (113 days)"
    t408 = "OCI-LY7"
    t409 = "upper lobe of left lung female adult (51 year)"
    t410 = "hematopoietic multipotent progenitor cell treated with interleukin-3 for 18 days, kit ligand for 18 days, hydrocortisone succinate for 18 days, erythropoietin for 18 days"
    t411 = "putamen male adult (78 years)"
    t412 = "common myeloid progenitor, CD34-positive male adult (42 years)"
    t413 = "placenta embryo (53 days)"
    t414 = "kidney male embryo (105 days)"
    t415 = "heart left ventricle female embryo (136 days)"
    t416 = "small intestine female embryo (108 days)"
    t417 = "LoVo"
    t418 = "cerebellar cortex male adult (78 years) and male adult (84 years)"
    t419 = "lung embryo (67 days)"
    t420 = "transverse colon female adult (53 years)"
    t421 = "brain embryo (80 days)"
    t422 = "stomach female embryo (108 days)"
    t423 = "umbilical cord embryo (59 days) and male embryo (76 days)"
    t424 = "muscle of leg male embryo (105 days)"
    t425 = "Caki2"
    t426 = "muscle of arm female embryo (105 days)"
    t427 = "foreskin melanocyte male newborn"
    t428 = "stomach male embryo (108 days)"
    t429 = "body of pancreas male adult (37 years)"
    t430 = "renal cortex interstitium female embryo (120 days)"
    t431 = "body of pancreas female adult (51 year)"
    t432 = "large intestine male embryo (105 days)"
    t433 = "limb embryo (58 days) and embryo (59 days)"
    t434 = "heart female embryo (147 days)"
    t435 = "heart male embryo (96 days)"
    t436 = "right renal pelvis male embryo (120 days)"
    t437 = "left lung female embryo (117 days)"
    t438 = "thymus female embryo (98 days)"
    t439 = "ovary female adult (53 years)"
    t440 = "left kidney male embryo (115 days)"
    t441 = "thymus male embryo (113 days)"
    t442 = "placenta female embryo (105 days)"
    t443 = "EH"
    t444 = "renal cortex interstitium male embryo (97 days)"
    t445 = "placenta embryo (102 days)"
    t446 = "placenta embryo (56 days) and embryo (59 days)"
    t447 = "renal pelvis female embryo (103 days)"
    t448 = "right lobe of liver female adult (53 years)"
    t449 = "skin fibroblast male embryo (97 days)"
    t450 = "tongue male embryo (72 days)"
    t451 = "skin fibroblast male embryo (97 days)"
    t452 = "liver female embryo (101 day) and female embryo (113 days)"
    t453 = "large intestine female embryo (107 days)"
    t454 = "hematopoietic multipotent progenitor cell treated with interleukin-3 for 6 days, kit ligand for 6 days, hydrocortisone succinate for 6 days, erythropoietin for 6 days"
    t455 = "common myeloid progenitor, CD34-positive male"
    t456 = "small intestine female embryo (98 days)"
    t457 = "CD4-positive, alpha-beta T cell male adult (21 year)"
    t458 = "brain male embryo (101 day)"
    t459 = "placenta female embryo (101 day) and male embryo (105 days)"
    t460 = "renal pelvis male embryo (91 day)"
    t461 = "lung embryo (80 days) and male embryo (76 days)"
    t462 = "Ammon's horn male adult (84 years)"
    t463 = "muscle of back female embryo (105 days)"
    t464 = "lung male embryo (82 days)"
    t465 = "left renal cortex interstitium male embryo (105 days)"
    t466 = "trophoblast cell embryo (17 weeks) and embryo (18 weeks)"
    t467 = "RPMI8226"
    t468 = "small intestine male embryo (91 day)"
    t469 = "brain embryo (56 days) and male embryo (58 days)"
    t470 = "pancreas female adult (30 years)"
    t471 = "adrenal gland female adult (53 years)"
    t472 = "breast epithelium female adult (51 year)"
    t473 = "left kidney male embryo (87 days)"
    t474 = "renal pelvis female embryo (96 days)"
    t475 = "stomach male embryo (127 days)"
    t476 = "CD8-positive, alpha-beta T cell female adult (34 years)"
    t477 = "spinal cord female embryo (89 days)"
    t478 = "muscle of arm male embryo (97 days)"
    t479 = "renal pelvis female embryo (105 days)"
    t480 = "HAP-1"
    t481 = "SJSA1"
    t482 = "retina embryo (74 days) and embryo (85 days)"
    t483 = "muscle of leg male embryo (127 days)"
    t484 = "fibroblast of skin of abdomen male embryo (97 days)"
    t485 = "bipolar neuron originated from GM23338 treated with 0.5 ug/mL doxycycline hyclate for 4 days"
    t486 = "stomach female embryo (147 days)"
    t487 = "lung male embryo (54 days) and male embryo (58 days)"
    t488 = "T-cell male adult (36 years)"
    t489 = "T-cell male adult (21 year)"
    t490 = "HK-2"
    t491 = "NCI-H460"
    t492 = "left lung male embryo (96 days)"
    t493 = "common myeloid progenitor, CD34-positive male adult (23 years)"
    t494 = "stomach female adult (51 year)"
    t495 = "CD4-positive, alpha-beta T cell female adult (33 years)"
    t496 = "kidney female embryo (113 days)"
    t497 = "skin fibroblast male embryo (97 days)"
    t498 = "placenta female embryo (85 days)"
    t499 = "brain male embryo (122 days)"
    t500 = "muscle of arm male embryo (97 days)"
    t501 = "renal cortex interstitium female embryo (103 days)"
    t502 = "thyroid gland female adult (51 year)"
    t503 = "NAMALWA"
    t504 = "heart embryo (59 days) and female embryo (76 days)"
    t505 = "large intestine male embryo (105 days)"
    t506 = "skin fibroblast male embryo (97 days)"
    t507 = "right kidney male embryo (96 days)"
    t508 = "CD14-positive monocyte male adult (37 years)"
    t509 = "ELF-1"
    t510 = "spinal cord female embryo (113 days)"
    t511 = "spleen embryo (112 days)"
    t512 = "left lung female embryo (107 days)"
    t513 = "thymus female embryo"
    t514 = "CD4-positive, alpha-beta T cell male adult (21 year)"
    t515 = "stomach female embryo (96 days)"
    t516 = "EL"
    t517 = "CD14-positive monocyte female adult (34 years)"
    t518 = "thyroid gland female adult (53 years)"
    t519 = "adrenal gland female embryo (113 days)"
    t520 = "muscle of back male embryo (96 days)"
    t521 = "SJCRH30"
    t522 = "natural killer cell male adult (21 year)"
    t523 = "heart male embryo (72 days) and male embryo (76 days)"
    t524 = "midbrain male adult (78 years) and male adult (84 years)"
    t525 = "ovary female adult (30 years)"
    t526 = "mesendoderm originated from H1-hESC"
    t527 = "natural killer cell male adult (37 years)"
    t528 = "natural killer cell female adult (34 years)"
    t529 = "foreskin keratinocyte male newborn"
    t530 = "stomach female embryo"
    t531 = "adrenal gland male embryo (108 days)"
    t532 = "testis male embryo"
    t533 = "mesenchymal stem cell originated from H1-hESC"
    t534 = "vagina female adult (51 year)"
    t535 = "common myeloid progenitor, CD34-positive male adult (43 years)"
    t536 = "heart right ventricle female embryo (101 day) and female embryo (103 days)"
    t537 = "L1-S8R"
    t538 = "heart female embryo (116 days) and female embryo (98 days)"
    t539 = "MCF 10A treated with 1 uM tamoxifen for 24 hours"
    t540 = "right renal pelvis male embryo (105 days)"
    t541 = "muscle of arm female embryo (98 days)"
    t542 = "H9 G1 phase genetically modified using stable transfection"
    t543 = "tibial nerve male adult (37 years)"
    t544 = "kidney male embryo (85 days)"
    t545 = "tongue female embryo (59 days) and female embryo (76 days)"
    t546 = "transverse colon female adult (51 year)"
    t547 = "right renal pelvis male embryo (105 days)"
    t548 = "large intestine male embryo (91 day)"
    t549 = "right kidney female embryo (117 days)"
    t550 = "right kidney male embryo (91 day)"
    t551 = "skin fibroblast male embryo (97 days)"
    t552 = "globus pallidus male adult (78 years) and male adult (84 years)"
    t553 = "kidney female embryo (105 days)"
    t554 = "right atrium auricular region female adult (53 years)"
    t555 = "thymus female embryo (147 days)"
    t556 = "stomach male adult (34 years)"
    t557 = "eye embryo (56 days) and male embryo (76 days)"
    t558 = "esophagus squamous epithelium male adult (37 years)"
    t559 = "glomerular visceral epithelial cell child (3 years)"
    t560 = "muscle of back male embryo (127 days)"
    t561 = "spinal cord male embryo (96 days)"
    t562 = "MCF 10A"
    t563 = "transverse colon male adult (54 years)"
    t564 = "kidney embryo (59 days) and female embryo (59 days)"
    t565 = "H1-hESC"
    t566 = "large intestine female embryo (98 days)"
    t567 = "large intestine female embryo (103 days)"
    t568 = "placenta male embryo (85 days)"
    t569 = "left lung female embryo (91 day)"
    t570 = "heart embryo (80 days)"
    t571 = "femur female embryo (98 days)"
    t572 = "H4"
    t573 = "trophoblast cell embryo (23 weeks)"
    t574 = "urinary bladder male embryo (76 days)"
    t575 = "HT-29"
    t576 = "limb embryo (53 days) and embryo (56 days)"
    t577 = "retina female embryo (89 days)"
    t578 = "dedifferentiated amniotic fluid mesenchymal stem cell"
    t579 = "upper lobe of left lung female adult (53 years)"
    t580 = "brain female embryo (105 days)"
    t581 = "muscle of arm embryo (101 day)"
    t582 = "renal cortex interstitium male embryo (108 days)"
    t583 = "pons male adult (78 years)"
    t584 = "thymus female embryo (105 days)"
    t585 = "CD8-positive, alpha-beta T cell female adult (33 years)"
    t586 = "cardiac muscle cell"
    t587 = "CD8-positive, alpha-beta T cell male adult (21 year)"
    t588 = "hematopoietic multipotent progenitor cell treated with interleukin-3 for 8 days, kit ligand for 8 days, hydrocortisone succinate for 8 days, erythropoietin for 8 days"
    t589 = "right lung female embryo (117 days)"
    t590 = "right lung male embryo (105 days)"
    t591 = "lung female embryo (96 days)"
    t592 = "adrenal gland male adult (54 years)"
    t593 = "renal cortex interstitium male embryo (127 days)"
    t594 = "spleen male adult (54 years)"
    t595 = "renal cortex interstitium female embryo (89 days)"
    t596 = "ascending aorta female adult (51 year)"
    t597 = "ovary female adult (51 year)"
    t598 = "hematopoietic multipotent progenitor cell treated with interleukin-3 for 13 days, kit ligand for 13 days, hydrocortisone succinate for 13 days, erythropoietin for 13 days"
    t599 = "cardiac fibroblast female embryo (94 days) and female embryo (98 days)"
    t600 = "adrenal gland male embryo (85 days)"
    t601 = "large intestine male embryo (108 days)"
    t602 = "occipital lobe male adult (84 years)"
    t603 = "right lung female embryo (107 days)"
    t604 = "small intestine female embryo (105 days)"
    t605 = "muscle of leg male embryo (104 days)"
    t606 = "lower leg skin female adult (53 years)"
    t607 = "adrenal gland female adult (51 year)"
    t608 = "adrenal gland female embryo (85 days)"
    t609 = "muscle of arm male embryo (115 days)"
    t610 = "right kidney female embryo (147 days)"
    t611 = "kidney female embryo (76 days) and male embryo (76 days)"
    t612 = "large intestine female embryo (108 days)"
    t613 = "right kidney female embryo (98 days)"
    t614 = "right renal cortex interstitium male embryo (120 days)"
    t615 = "muscle of arm male embryo (96 days)"
    t616 = "thymus male embryo (108 days)"
    t617 = "B cell female adult (34 years)"
    t618 = "thyroid gland male adult (54 years)"
    t619 = "spinal cord female embryo (59 days) and male embryo (72 days)"
    t620 = "heart embryo (96 days)"
    t621 = "renal pelvis female embryo (89 days)"
    t622 = "renal pelvis male embryo (108 days)"
    t623 = "heart female embryo (103 days)"
    t624 = "H9"
    t625 = "K562"
    t626 = "left renal cortex interstitium male embryo (105 days)"
    t627 = "right lung female embryo (108 days)"
    t628 = "stomach female embryo (96 days)"
    t629 = "small intestine male adult (34 years)"
    t630 = "renal cortex interstitium female embryo (96 days)"
    t631 = "A172"
    t632 = "left lung male embryo (115 days)"
    t633 = "muscle of leg male embryo (115 days)"
    t634 = "hematopoietic multipotent progenitor cell treated with interleukin-3 for 15 days, kit ligand for 15 days, hydrocortisone succinate for 15 days, erythropoietin for 15 days"
    t635 = "muscle of leg female embryo (115 days)"
    t636 = "PC-9"
    t637 = "kidney female embryo (108 days)"
    t638 = "stomach embryo (101 day)"
    t639 = "H9 G2 phase genetically modified using stable transfection"
    t640 = "esophagus muscularis mucosa male adult (37 years)"
    t641 = "small intestine male embryo (108 days)"
    t642 = "heart left ventricle female embryo (101 day) and female embryo (103 days)"
    t643 = "SK-N-DZ"
    t644 = "brain male embryo (104 days)"
    t645 = "right lung male embryo (87 days)"
    t646 = "muscle of arm male embryo (105 days)"
    t647 = "muscle of arm male embryo (104 days)"
    t648 = "kidney female embryo (105 days)"
    t649 = "left lung male embryo (105 days)"
    t650 = "left kidney female embryo (107 days)"
    t651 = "Peyer's patch male adult (37 years)"
    t652 = "renal pelvis male embryo (113 days)"
    t653 = "prostate gland male adult (37 years)"
    t654 = "HeLa-S3"
    t655 = "left lung female embryo (110 days)"
    t656 = "thymus male embryo (104 days)"
    t657 = "neural progenitor cell originated from H9"
    t658 = "trophoblast cell embryo (39 weeks) and embryo (40 weeks)"
    t659 = "right lung male embryo (96 days)"
    t660 = "H9 G1 phase genetically modified using stable transfection"
    t661 = "small intestine male embryo (87 days)"
    t662 = "spinal cord female embryo (87 days)"
    t663 = "left kidney female embryo (110 days)"
    t664 = "arm bone male embryo (81 day)"
    t665 = "testis male adult (54 years)"
    t666 = "transverse colon male adult (37 years)"
    t667 = "right renal pelvis male embryo (105 days)"
    t668 = "lung embryo (101 day)"
    t669 = "inferior parietal cortex male adult (84 years)"
    t670 = "kidney capillary endothelial cell female embryo (113 days)"
    t671 = "placenta male embryo (91 day)"
    t672 = "right kidney male embryo (115 days)"
    t673 = "coronary artery female adult (51 year)"
    t674 = "BM0106-Day0-MCP-A / Bone Marrow CD34+ / pDC"
    t675 = "BM0106-UNK-ATAC-2 / Bone Marrow CD34+ / UNK"
    t676 = "BM0828-MEGA1-A-151109 / Bone Marrow CD34+ / Mega"
    t677 = "BM1077-MCP / Bone Marrow CD34+ / pDC"
    t678 = "BM1077-UNK / Bone Marrow CD34+ / UNK"
    t679 = "BM1137-GMP1-low-ATAC-2 / Bone Marrow CD34+ / GMP-A"
    t680 = "BM1137-GMP2-mid-ATAC-1 / Bone Marrow CD34+ / GMP-B"
    t681 = "BM1137-GMP3-high-ATAC-2 / Bone Marrow CD34+ / GMP-C"
    t682 = "BM1214-Day0-MCP / Bone Marrow CD34+ / pDC"
    t683 = "BM1214-Day0-UNK-A / Bone Marrow CD34+ / UNK"

class Tracks(BaseModel):
    category1: list[tissues1]
    category2: list[tissues2]
    subcategory: str

# The chosen sad tracks are somewhat random, so they change if they are genereated again.
# By default, if there were already sad tracks chosen for a phenotype, the method will just look them up in the csv table.
# To avoid this, the parameter no_lookup can be set to generate the selction again. Depending how the overwrite parameter is set,
# overwrite the values in the csv will be overwritten.
# (There is probably better ways to manage the data.)
# (Also the overwrite doesn't work yet...)

def generate_sad_tracks(phenotype, model="gpt-4o", no_lookup=False, overwrite=False):

    df = pd.read_csv("phenotype_sad_track_indices.csv", sep=";")

    rows = df.loc[df['phenotype'] == phenotype]
    record_available = not rows.empty

    if(not no_lookup & (model=="gpt-4o") & record_available):
        sad_tracks = rows.iloc[0]["sad_track_indices"]
        return [int(str) for str in sad_tracks.split(", ")]
    
    load_dotenv(".env")
    client = OpenAI(api_key=os.getenv("OPENAI_API_KEY"))

    completion = client.beta.chat.completions.parse(
        model="gpt-4o",
        messages=[
            {"role": "system", "content": """You are an expert in human biology and you are working in a project exploring the human genome. There are two sets of tissue samples that were sequenced,
            their descriptions are names of cell lines or descriptions of the sample. These descriptions are enumerated in the two classes "tissues1" and "tissues2". The team plans to study several phenotypes
            and therefore has to choose the most relevant sequencing tracks.
            Phenotypes might be shortened to keywords.
            For any provided input, first decide what phenotype is investigated, then assemble a list of functions or anatomical structures of the human body that will influence this phenotype most, then
            return the sequenced tissues that contain the clearest information on those functions."""},
            {"role": "user", "content": phenotype},
        ],
        response_format=Tracks,
    )

    event = completion.choices[0].message.parsed

    selected_tracks = [int(tissue.name[1:]) for tissue in event.category1+event.category2]

    if((model=="gpt-4o") & overwrite):
        if(record_available):
            df.loc[df['phenotype'] == phenotype][0] = {"phenotype":phenotype, "sad_track_indices":", ".join(str(x) for x in selected_tracks)}
        else:
            df.loc[len(df)]={"phenotype":phenotype, "sad_track_indices":", ".join(str(x) for x in selected_tracks)}
        df.to_csv("phenotype_sad_track_indices.csv", sep=";", index=False)

    return selected_tracks

phenotype="Major Depressive Disorder"
print(generate_sad_tracks(phenotype=phenotype, no_lookup=False))